html_text()
#Read the html page content and extract all javascript codes that are inside a list
emailjs <- read_html(link) %>%
html_nodes('div') %>%
# html_nodes('div') %>%
html_text()
emailjs
emailjs <- read_html(link) %>%
html_nodes('div') %>%
# html_nodes('div') %>%
html_text()
#URL with js-rendered content to be scraped
link <- 'https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41'
#Read the html page content and extract all javascript codes that are inside a list
emailjs <- read_html(link) %>%
html_nodes('div') %>%
# html_nodes('div') %>%
html_text()
emailjs
#Read the html page content and extract all javascript codes that are inside a list
emailjs <- read_html(link) %>%
html_nodes('id') %>%
# html_nodes('div') %>%
html_text()
emailjs
#Read the html page content and extract all javascript codes that are inside a list
emailjs <- read_html(link) %>%
html_nodes('iframe') %>%
# html_nodes('div') %>%
html_text()
install.packages("RSelenium")
library(RSelenium)
library(devtools)
devtools::install_github("ropensci/RSelenium")
RSelenium::checkForServer()
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 4445L,
browserName = "firefox"
)
remDr$open()
# connect to running server
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 8000,
browserName = "firefox"
)
remDr$open()
# connect to running server
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 8000L,
browserName = "firefox"
)
remDr$open()
remDr$getStatus()
remDr <- remoteDriver(remoteServerAddr = "140.232.11.132", port = 4445L)
# connect to running server
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 4445L,
browserName = "firefox"
)
remDr$open()
# connect to running server
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 4444L,
browserName = "firefox"
)
remDr$open()
# connect to running server
remDr <- remoteDriver(
remoteServerAddr = "localhost",
port = 4444,
browserName = "firefox"
)
remDr$open()
remDr$getStatus()
remDr <- remoteDriver(remoteServerAddr = "140.232.11.132", port = 4444L)
remDr$open()
remDr$navigate("http://www.google.com/ncr")
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr$status()
remDr$navigate("http://www.google.com/ncr")
remDr$navigate("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr$navigate("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
?findElement
webElem <- remDr$findElement(using = "name", value = "site-header")
webElem <- remDr$findElement(using = "id", value = "site-header")
webElem$getElementAttribute("name")
webElem <- remDr$findElement(using = "class", value = "site-header")
webElem$getElementAttribute("class")
webElem <- remDr$findElement(using = "class", value = "sc-fznWqX dAkvW")
webElem <- remDr$findElement(using = "xpath", value = "//*[@id="id"]/main/div[1]/div[3]/div[2]/div[1]")
webElem <- remDr$findElement(using = "xpath", value = '//*[@id="id"]/main/div[1]/div[3]/div[2]/div[1]')
?findElement
webElem$getElementAttribute("div[class='sc-fznWqX dAkvW']")
webElem$getElementAttribute("div[class='sc-fznWqX dAkvW']")
webElem <- remDr$findElement(using = "css", value = "sc-fznWqX dAkvW")
webElem <- remDr$findElement(using = "cssselector", value = "sc-fznWqX dAkvW")
webElem <- remDr$findElement(using = "css selector", value = "div.sc-fznWqX:nth-child(1) > div:nth-child(1) > div:nth-child(1)")
webElem <- remDr$findElement(using = "css selector", value = "html body div#root main.sc-fzpkJw.hctKJM div.sc-fznzOf.jxQFAb div.sc-fzqNJr.hXQgjp div.sc-fznxsB.cUWXFh div.sc-fznWqX.dAkvW div.sc-AxmLO.dKUPmW div.sc-fzozJi.kcjQYa")
webElem <- remDr$findElement(using = "xpath", value = "/html/body/div/main/div[1]/div[3]/div[2]/div[1]")
webElem <- remDr$findElement(using = "xpath", value = "//*[@id="id"]/main/div[1]/div[3]/div[2]/div[1]")
webElem <- remDr$findElement(using = "xpath", value = '//*[@id="id"]/main/div[1]/div[3]/div[2]/div[1]')
webElem <- remDr$findElement(using = "xpath", value = '/html/body/div/main/div[1]/div[3]/div[2]/div[1]')
webElem$getElementAttribute("div[class='sc-fzozJi kcjQYa']")
webElem$getElementAttribute("div[class='sc-fzoyAV fQsatj']")
webElem <- remDr$findElement(using = "", value ="scoreboard_iframe")
webElem <- remDr$findElement(using = "tag name", value ="scoreboard_iframe")
webElem$getElementAttribute("div[class='sc-fzoyAV fQsatj']")
webElem <- remDr$findElement(using = "tag name", value ="scoreboard_iframe")
webElem <- remDr$findElement(using = "tag name", value ="scoreboard_iframe")
remDr$findElement(using = "link text", "PDF")
webElem$getElementAttribute("div[class='sc-fzoyAV fQsatj']")
webElem <- remDr$findElement(using = "tag name", value ="iframe")
webElem$getElementAttribute("div[class='sc-fzoyAV fQsatj']")
webElem$getElementAttribute("type")
webElem$getElementAttribute("text")
webElem$getElementAttribute("name")
webElem$getElementAttribute("div[class='sc-fznWqX dAkvW']")
webElem$getElementAttribute("name")
webElem$getElementAttribute("div[class='sc-fznWqX dAkvW']")
sapply(webElems, function(x){x$getElementAttribute("src")})
sapply(webElem, function(x){x$getElementAttribute("src")})
webElem <- remDr$findElement(using = "tag name", value ="iframe")
sapply(webElem, function(x){x$getElementAttribute("src")})
webElems <- remDr$findElements(using = "css", "[href]")
unlist(sapply(webElems, function(x) {x$getElementAttribute("href")}))
XML::htmlParse(remDr$getPageSource()[[1]])
XML::htmlParse(webElem$getPageSource()[[1]])
XML::htmlParse(webElem$getPageSource()[[2]])
sapply(webElems, function(x){x$getElementAttribute("src")})
remDr$switchToFrame(webElems[[2]])
remDr$switchToFrame(webElem[[2]])
remDr$findElement(using = "link ", "county")
findElement
webElem <- remDr$findElement(using = "tag name", value ="iframe")
remDr$navigate("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
remDr$findElement(using = "link", "county")
remDr$findElement(using = "lissnk", "county")
webElem <- remDr$findElement(using = "xpath", value ="//*[@id="id"]/main/div[1]/div[3]/div[2]")
webElem <- remDr$findElement(using = "tag name", value ='//*[@id="id"]/main/div[1]/div[3]/div[2]')
webElem <- remDr$findElement(using = "xpath", value ='//*[@id="id"]/main/div[1]/div[3]/div[2]')
webElem <- remDr$findElement(using = "tag name", value ="iframe")
sapply(webElem, function(x){x$getElementAttribute("src")})
webElem <- remDr$findElement(using = "tag name", value ="iframe")
sapply(webElem, function(x){x$getElementAttribute("src")})
unlist(sapply(webElems, function(x) {x$getElementAttribute("href")}))
XML::htmlParse(webElem$getPageSource()[[1]])
webElem
remDr$findElement(using = "css selector", "#id > main > div.sc-fznzOf.jxQFAb > div.sc-fzqNJr.hXQgjp > div.sc-fznxsB.cUWXFh > div:nth-child(30)")
remDr$findElement(using = "class name", "sc-fznWqX dAkvW")
remDr$findElement(using = "class", "sc-fznWqX dAkvW")
remDr$findElement(using = "class", "sc-fznWqX.dAkvW")
remDr$findElement(using = "class name", "sc-fznWqX.dAkvW")
# executive order posted
order <- xml2::read_html("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
# identify html tag to scrape
order_txt <- order %>%
html_node("div.sc-fznWqX.dAkvW") %>%
html_text()
order_txt
# identify html tag to scrape
order_txt <- order %>%
html_node("div..sc-fznWqX.dAkvW") %>%
html_text()
remDr$findElement(using = "class", ".sc-fznWqX.dAkvW")
webElem <- remDr$findElement(using = "tag name", value ="iframe")
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']")
webElem$getElementAttribute("name")
webElem$getElementAttribute("type")
webElem$getElementAttribute("text")
webElem$getElementAttribute("")
webElem$getElementAttribute()
webElems <- remDr$findElements(using = "css", "[href]")
webElems
remDr$findElement(using = "xpath", "//input[@class='sc-fznWqX_dAkvW']")
remDr$findElement(using = "xpath", "//input[@class='sc-fznWqX.dAkvW']")
remDr$findElement(using = "xpath", "//div[@class='sc-fznWqX.dAkvW']")
remDr$findElement(using = "xpath", "//div[@class='sc-fznWqX_dAkvW']")
remDr$findElement(using = "css", "//div[@class='sc-fznWqX_dAkvW']")
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']")
?getElementAttribute
webElem$getElementText("div[class='.sc-fznWqX.dAkvW']")
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']")
webElem$getElementText("div[class='.sc-fznWqX.dAkvW']")
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']") %>% getElementText
library(dplyr)
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']") %>% getElementText
remDr %>% go("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
remDr <- remoteDr()
webElems <- remDr$findElements(using = "css selector", ".sc-fznWqX.dAkvW")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
webElems <- remDr$findElements(using = "tag name", value ="iframe")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
webElems <- remDr$findElements(using = "tag name", value ="root")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
webElems <- remDr$findElements(using = "tag name", value ="id")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
webElems <- remDr$findElements(using = "css selector", "sc-fznZeY.gJlwEu")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
library(RSelenium)
#URL with js-rendered content to be scraped
link <- 'https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41'
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr$navigate("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
remDr$maxWindowSize()
remDr$screenshot(display = TRUE)
webElem <- remDr$findElement(using = "tag name", value ="iframe")
remDr$findElement(using = "xpath", "//div[@class='sc-fznWqX_dAkvW']")
remDr$findElement(using = "xpath", "//div[@class='sc-fznWqX.dAkvW']")
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']") %>% getElementText
webElem$getElementAttribute("div[class='.sc-fznWqX.dAkvW']")
webElem$getElementAttribute("text")
# identify html tag to scrape
order_txt <- order %>%
html_node("div.sc-fznWqX.dAkvW") %>%
html_text()
order_txt
# executive order posted
order <- xml2::read_html("https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41")
# identify html tag to scrape
order_txt <- order %>%
html_node("div.sc-fznWqX.dAkvW") %>%
html_text()
# identify html tag to scrape
order_txt <- order %>%
html_node("div.sc-fznWqX.dAkvW") %>%
html_text()
order_txt
remDr$navigate("https://www.wsbtv.com/weather/school-closings/")
webElem <- remDr$findElement(using = "tag name", value ="tbody")
remDr$findElement(using = "class name", "name")
remDr$maxWindowSize()
remDr$screenshot(display = TRUE)
webElem <- remDr$findElement(using = "tag name", value ="tbody")
remDr$findElement(using = "class name", "name")
remDr$maxWindowSize()
remDr$screenshot(display = TRUE)
webElem <- remDr$findElement(using = "tag name", value ="tbody")
remDr$findElement(using = "class name", "name")
remDr$findElement(using = "class name", "name")
r <- remDr$findElement(using = "class name", "name")
e
r
webElem$getElementAttribute("text")
webElem <- remDr$findElement(using = "tag name", value ="tbody")
webElem$getElementAttribute("text")
webElem <- remDr$findElement(using = "class name", value ="name")
webElem$getElementAttribute("text")
webElem <- remDr$findElement(using = "class", value = "name")
webElem$getElementAttribute("name")
remDr$getCurrentUrl()
webElem$getElementAttribute("class")
webElem <- remDr$findElement(using = "class name", value ="name") %>% getElementText()
webElem <- remDr$findElement(using = "class name", value ="name") %>% webElem$getElementText()
webElem <- remDr$findElement(using = "class name", value ="name") %>% remDr$getElementText()
webElems <- remDr$findElements(using = "class name", "name")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
webElem <- remDr$findElement(using = "class name", value ="name") %>% remDr$getElementText()
resHeaders <- unlist(lapply(webElem, function(x) {x$getElementText()}))
remDr$screenshot(display = TRUE)
webElem <- remDr$findElement(using = "class name", value ="name")
resHeaders <- unlist(lapply(webElem, function(x) {x$getElementText()}))
webElems <- remDr$findElements(using = "class name", "name")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
webElems <- remDr$findElements(using = "id", "closings-table")
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
population <- url %>%
html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table()
population <- population[[1]]
#URL with js-rendered content to be scraped
link <- 'https://www.unacast.com/covid19/social-distancing-scoreboard?view=state&fips=41'
#URL with js-rendered content to be scraped
link <- 'https://www.wsbtv.com/weather/school-closings/'
population <- link %>%
html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table()
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table()
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
population
View(population)
View(population[[1]])
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]/tbody') %>%
html_table(fill = TRUE)
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]/tbody') %>%
html_table()
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
population <- population[[1]]
webElems <- remDr$findElements(using = "xpath", "//*[@id="closings-table"]")
webElems <- remDr$findElements(using = "xpath", '//*[@id="closings-table"]')
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
results_chr <- unlist(strsplit(resHeaders[[1]], "\n"))
results_chr
webElem<-remDr$findElement(using = "id", value = "page-selector-2")
webElem$clickElement()
webElems <- remDr$findElements(using = "xpath", '//*[@id="closings-table"]')
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
results_chr <- unlist(strsplit(resHeaders[[1]], "\n"))
View(webElems)
webElems
webElem<-remDr$findElement(using = "id", value = "page-selector-2")
webElem$clickElement()
webElems <- remDr$findElements(using = "xpath", '//*[@id="closings-table"]')
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
results_chr <- unlist(strsplit(resHeaders[[1]], "\n"))
results_chr
population <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
population <- population[[1]]
population
remDr$navigate("https://www.wsbtv.com/weather/school-closings/")
remDr$maxWindowSize()
remDr$screenshot(display = TRUE)
webElems <- remDr$findElements(using = "xpath", '//*[@id="closings-table"]')
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
country_html
country_html <- xml2::read_html(webElems$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node("#losings-table") %>%
rvest::html_table(fill = TRUE)
country_table <- country_html %>%
rvest::html_node("#losings-table") %>%
rvest::html_table(fill = TRUE)
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_table
more_pages <- length(country_table) > 4
more_pages
snake_country_secondary_download <- function(page_element){
element <- remDr$findElement(using = "xpath", '//*[@id="closings-table"]')
element$clickElement()
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
secondary_country <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
secondary_country
}
snake_country_secondary_download <- function(page_element){
element <- remDr$findElement(using = 'id', page_element)
element$clickElement()
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
secondary_country <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
secondary_country
}
snake_country_secondary_download("page-selector-2")
snake_country_secondary_download(c("page-selector-2", "page-selector-2")
)
snake_country_secondary_download(c("page-selector-2", "page-selector-2"))
snake_country_secondary_download("page-selector-2", "page-selector-2")
snake_country_secondary_download("page-selector-2", "page-selector-3")
View(webElems)
View(country_table)
View(population)
link <- "https://www.wsbtv.com/weather/school-closings/"
ga_closures <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
ga_closures <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
ga_closures <- ga_closures[[1]]
View(ga_closures)
ga_closures <- link %>%
xml2::read_html() %>%
html_nodes(xpath='//*[@id="closings-table"]') %>%
html_table(fill = TRUE)
ga_closures <- ga_closures[[1]]
ga_closures
View(ga_closures)
searchbox <- remDr$findElement(using = "xpath", '//*[@id="schools-filter"]')
searchbox$sendKeysToElement(list("County Schools", key = "enter"))
searchbox <- remDr$findElement(using = "xpath", '//*[@id="schools-filter"]')
searchbox$sendKeysToElement(list("County Schools", key = "enter"))
webElems <- remDr$findElements(using = "xpath", '//*[@id="closings-table"]')
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(searchbox$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(searchbox$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
webElems <- searchbox$findElements(using = "xpath", '//*[@id="closings-table"]')
country_html <- xml2::read_html(webElems$getPageSource()[[1]])
country_html <- xml2::read_html(searchbox$getPageSource()[[1]])
country_html <- xml2::read_html(webElems$getPageSource()[[1]])
webElems <- searchbox$findElements(using = "xpath", '//*[@id="closings-table"]')
river<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr$navigate("https://www.wsbtv.com/weather/school-closings/")
# remDr$maxWindowSize()
# remDr$screenshot(display = TRUE)
searchbox <- remDr$findElement(using = "xpath", '//*[@id="schools-filter"]')
searchbox$sendKeysToElement(list("County Schools", key = "enter"))
webElems <- searchbox$findElements(using = "xpath", '//*[@id="closings-table"]')
country_html <- xml2::read_html(webElems$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(webElems$getPageSource())
webElems <- searchbox$findElements(using = "xpath", '//*[@id="closings-table"]')
webElems
webElems <- searchbox$findElements(using = "tag name", 'table')
webElems
?html_node
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(webElems$getPageSource()[[1]])
country_table <- webElems %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_table <- searchbox %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(searchbox$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
webElems <- searchbox$findElements(using = "tag name", 'table')
link <- 'https://www.wsbtv.com/weather/school-closings/'
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr$navigate("https://www.wsbtv.com/weather/school-closings/")
# remDr$maxWindowSize()
# remDr$screenshot(display = TRUE)
searchbox <- remDr$findElement(using = "xpath", '//*[@id="schools-filter"]')
searchbox$sendKeysToElement(list("County Schools", key = "enter"))
webElems <- searchbox$findElements(using = "tag name", 'table')
country_html <- xml2::read_html(searchbox$getPageSource()[[1]])
country_table <- country_html %>%
rvest::html_node(xpath='//*[@id="closings-table"]') %>%
rvest::html_table(fill = TRUE)
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
country_html <- xml2::read_html(remDr$getPageSource()[[1]])
remDr$navigate("https://www.wsbtv.com/weather/school-closings/")
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
rD <- rsDriver(verbose = FALSE,port=4444L)
remDr <- rD$client
remDr$close()
remDr$close()
remDr <- rD$client
remDr$close()
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
rD$server$stop()
remDr$server$stop()
rm(rD)
rm(rD)
rm(rDr)
rm(remDr)
library(RSelenium)
driver<- rsDriver(browser=c("firefox"))
remDr <- driver[["client"]]
remDr$open()
remDr <- rsDriver[["client"]]
driver<- rsDriver(browser=c("firefox"))
gc()
rD[["server"]]$stop()
remDr[["server"]]$stop()
